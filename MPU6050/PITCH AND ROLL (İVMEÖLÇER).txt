#include <Adafruit_MPU6050.h>
#include <Adafruit_Sensor.h>
#include <Wire.h>
float Ax;
float Ay;
float Az;

//Bu kısım bizde değişecek
float xMax = 1.03 ;
float xMin = - .97;
float yMax = .98 ;
float yMin = -1.01 ;
float zMax = .96 ;
float zMin = -1.08 ;

float xOffset = (xMax+xMin)/2;
float yOffset = (yMax+yMin)/2;
float zOffset = (zMax+zMin)/2;

float xScale = 2/(xMax - xMin);
float yScale = 2/(yMax - yMin);
float zScale = 2/(zMax - zMin);

float roll;
float pitch;

Adafruit_MPU6050 mpu;

void setup(){
Serial.begin(115200);
mpu.begin();
Serial.println("MPU6050 Started ");
mpu.setAccelerometerRange(MPU6050_RANGE_2_G);
mpu.setFilterBandwidth(MPU6050_BAND_21_HZ);

}

void loop(){
sensors_event_t a, g, temp; // bütün değişkenleri tanımlamazsan hata veriyor
mpu.getEvent(&a, &g, &temp); // Gelen verileri a ya atar
Ax = a.acceleration.x;
Ay = a.acceleration.y;
Az = a.acceleration.z

Ax = xScale*(Ax-xOffset);
Ay = yScale*(Ay-yOffset);
Az = zScale*(Az-zOffset);

// Derece cinsinden
pitch = atan2(Ay,sqrt(Az*Az+Ax*Ax))*360/(2*3.14); // y ekseninde
roll = atan2(Ax,sqrt(Az*Az+Ay*Ay))*360/(2*3.14);  // x ekseninde
 
  Serial.print("Roll:");
  Serial.print(roll);
  Serial.print(',');
  Serial.print("Pitch:");
  Serial.print(pitch);
    Serial.print(',');
   Serial.print("UL:");
 Serial.print(90);
 Serial.print(',');
 Serial.print("LL:");
 Serial.println(-90);
 

Serial.print("Ax: "); // Etiketleme için
Serial.print(Ax);
Serial.print(' , ');
Serial.print("Ay: ");
Serial.println(Ay);
Serial.print(',');
Serial.print("Az: ");
Serial.println(Az);
Serial.print(' , ');
Serial.print(" UL: "); // Upper Limit
Serial.print(1); // grafiği sınırlamak için
Serial.print(','); // Virgülle ayırmazsan grafikte göremezsin
Serial.print(" LL: ");
Serial.print(-1);

delay (50);
}
